<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/decks/0.2072d913c063a542f3b5.css">/*! modern-normalize | MIT License | https://github.com/sindresorhus/modern-normalize */html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}hr{height:0}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}</style><meta name="generator" content="Gatsby 2.1.1"/><title data-react-helmet="true">LeanPropsの紹介 - decks</title><meta data-react-helmet="true" name="viewport" content=""/><style data-styled="hsARDy kmKUJZ gKaMTo zIEGn kcEqXP cqoxnG kPOGYN elpTsf iLvMQI gmKbQu fVnLfE fJODMz cXgiMa eCoqJu kaUAEP gtARdA jyMVhc jHReHG" data-styled-version="4.1.3">
/* sc-component-id: sc-bdVaJa */
.eCoqJu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin-bottom:8px;margin-left:auto;margin-right:auto;} @media print{.eCoqJu{display:none;}}
/* sc-component-id: sc-bwzfXH */
.kaUAEP{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.5;margin:0px;padding:4px;color:#000;background-color:#000;} .kaUAEP:focus{outline:none;box-shadow:0 0 0 1px;}.gtARdA{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:4px solid transparent;background-clip:padding-box;border-radius:9999px;width:8px;height:8px;color:inherit;opacity:0.125;margin:0px;padding:4px;color:#000;background-color:#000;} .gtARdA:focus{outline:none;box-shadow:0 0 0 1px;}
/* sc-component-id: sc-htpNat */
.cXgiMa{position:fixed;left:0;right:0;bottom:0;}
/* sc-component-id: sc-ifAKCX */
.jyMVhc{cursor:pointer;width:64px;height:100vh;position:fixed;top:0;left:0;bottom:0;}
/* sc-component-id: sc-EHOje */
.jHReHG{cursor:pointer;width:64px;height:100vh;position:fixed;top:0;right:0;bottom:0;}
/* sc-component-id: sc-bZQynM */
.kmKUJZ{overflow-x:hidden;width:100%;height:100%;} @media print{.kmKUJZ{height:auto;overflow-x:visible;}}
/* sc-component-id: sc-gzVnrw */
.gKaMTo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;height:100%;-webkit-transition-property:-webkit-transform;-webkit-transition-property:transform;transition-property:transform;-webkit-transition-timing-function:ease-out;transition-timing-function:ease-out;-webkit-transition-duration:.3s;transition-duration:.3s;-webkit-transform:translate3d(0%,0,0);-ms-transform:translate3d(0%,0,0);transform:translate3d(0%,0,0);} @media print{.gKaMTo{height:auto;display:block;}}
/* sc-component-id: sc-htoDjs */
.zIEGn{-webkit-flex:none;-ms-flex:none;flex:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;overflow:hidden;width:100%;height:100%;padding-left:32px;padding-right:32px;} @media print{.zIEGn{width:100vw;height:100vh;page-break-after:always;page-break-inside:avoid;-webkit-print-color-adjust:exact;}} @media screen and (min-width:40em){.zIEGn{padding-left:64px;padding-right:64px;}} @media screen and (min-width:52em){.zIEGn{padding-left:128px;padding-right:128px;}}
/* sc-component-id: sc-dnqmqq */
.hsARDy{font-family:system-ui,sans-serif;font-size:16px;text-align:center;width:100vw;height:100vh;color:#000;background-color:white;} @media print{.hsARDy{font-size:24px;height:auto;}} @media screen and (min-width:64em){.hsARDy{font-size:32px;}}
/* sc-component-id: sc-cSHVUG */
.kcEqXP{line-height:1.25;font-size:3em;}
/* sc-component-id: sc-chPdSV */
.cqoxnG{line-height:1.25;font-size:2em;}
/* sc-component-id: sc-kEYyzF */
.elpTsf{color:#07c;}
/* sc-component-id: sc-kkGfuU */
.kPOGYN{font-size:1.5em;}
/* sc-component-id: sc-iAyFgw */
.iLvMQI{text-align:left;font-size:1.5em;text-align:left;}
/* sc-component-id: sc-hSdWYo */
.fJODMz{text-align:left;font-size:1.5em;text-align:left;}
/* sc-component-id: sc-brqgnP */
.fVnLfE{font-family:Menlo,monospace;color:#f0f;background-color:codeBackground;}</style><link as="script" rel="preload" href="/decks/webpack-runtime-e38549b4153771d3610e.js"/><link as="script" rel="preload" href="/decks/app-7786070715085e152cdb.js"/><link as="script" rel="preload" href="/decks/0-843479870977f7b52199.js"/><link as="script" rel="preload" href="/decks/1-757dd8e64a22d224a6d2.js"/><link as="script" rel="preload" href="/decks/component---cache-mdx-deck-template-a-25-e-21-bd-5-bc-9579945-ec-0-e-63-bbc-00653-js-ed865740aed939d2c943.js"/><link as="fetch" rel="preload" href="/decks/static/d/986/path---deck-rpscala-236-306-438-F0p9USg5VBU8MKGyezr11RGk.json" crossOrigin="use-credentials"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div role="presentation" tabindex="-1"><div><div mode="NORMAL" step="0" width="100vw" height="100vh" color="text" class="sc-dnqmqq hsARDy"><div class="sc-bZQynM kmKUJZ"><div class="sc-gzVnrw gKaMTo"><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanProps の紹介</h1><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">TSUYUSATO Kitsune (@MakeNowJust)</h2></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">前回のあらすじ</h1></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">ある日のこと</h2></div></div><div class="sc-htoDjs zIEGn"><div><img src="/decks/static/leancheck-e726c387337e979d2a25d8205343dc60.png"/><p font-size="2" class="sc-kkGfuU kPOGYN"><a href="https://github.com/rudymatela/leancheck" color="link" class="sc-kEYyzF elpTsf">https://github.com/rudymatela/leancheck</a></p></div></div><div class="sc-htoDjs zIEGn"><div><img src="/decks/static/leancheck-phd-0ac506f2ed27971c1d6391d144f4511a.png"/><p font-size="2" class="sc-kkGfuU kPOGYN"><a href="https://matela.com.br/paper/rudy-phd-thesis-2017.pdf" color="link" class="sc-kEYyzF elpTsf">https://matela.com.br/paper/rudy-phd-thesis-2017.pdf</a></p></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">ひと目で、尋常じゃないライブラリと見抜いたよ</h2></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">(Haskell のライブラリなので)</h2><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">Scala に移植してみよう！</h2></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">本編</h1></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">自己紹介</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu">TSUYUSATO Kitsune (@MakeNowJust)</li><li class="sc-eHgmQL gmKbQu">普段は TypeScript とかを書いている</li><li class="sc-eHgmQL gmKbQu">Crystal というプログラミング言語のコントリビュータ</li><li class="sc-eHgmQL gmKbQu">形式言語が好き</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">まず初めに、</h1></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanCheck とは？</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu">Haskell のライブラリ</li><li class="sc-eHgmQL gmKbQu"><em>&quot;simple enumerative property-based testing library&quot;</em></li><li class="sc-eHgmQL gmKbQu">実装が比較的小さい<br/>
(<code color="code" class="sc-brqgnP fVnLfE">Test.LeanCheck.Core</code>はコメントを除いて 185 行くらい)</li></ul><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#EDEDED">&gt;</span> <span class="token,hvariable">holds</span> <span class="token" style="color:#FF73FD">100</span> <span class="token" style="color:#EDEDED">$</span> <span class="token" style="color:#EDEDED">\</span><span class="token,hvariable">xs</span><span class="token" style="color:#EDEDED">-&gt;</span> <span class="token" style="color:#A8FF60">sort</span> <span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">sort</span> <span class="token,hvariable">xs</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#EDEDED">==</span> <span class="token" style="color:#A8FF60">sort</span> <span class="token" style="color:#c5c8c6">(</span><span class="token,hvariable">xs</span> <span class="token" style="color:#EDEDED">::</span> <span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#99CC99">Int</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span>
<span class="token" style="color:#99CC99">True</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanCheck とは？</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu">SmallCheck のような感じで、小さいものから順番にチェックしていく方針</li><li class="sc-eHgmQL gmKbQu">ランダムにデータを生成するのは<em>サポートしていない</em></li><li class="sc-eHgmQL gmKbQu">Generic を使ったデータを生成するクラスの自動導出</li><li class="sc-eHgmQL gmKbQu">Template Haskell を使ったデータを生成する型クラスの自動導出</li><li class="sc-eHgmQL gmKbQu"><strong>関数の生成をサポートしている</strong></li><li class="sc-eHgmQL gmKbQu"><strong>関数に対する<code color="code" class="sc-brqgnP fVnLfE">Show</code>クラスのインスタンスを提供している</strong></li></ul><p font-size="2" class="sc-kkGfuU kPOGYN">(個人的には下の二つが面白いと思った)</p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">早速、Scala に移植してみた</h1></div></div><div class="sc-htoDjs zIEGn"><div><img src="/decks/static/leanprops-fc60888b3fb44d35b184356c16c945ff.png"/><p font-size="2" class="sc-kkGfuU kPOGYN"><a href="https://makenowjust.github.io/leanprops/" color="link" class="sc-kEYyzF elpTsf">https://makenowjust.github.io/leanprops/</a></p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanProps という名前になった</h1><p font-size="2" class="sc-kkGfuU kPOGYN">(leancheck4s という名前が<br/>当時はなぜか思い付かなかった‥‥)</p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanProps で出来ること</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Int</code>などの整数、<code color="code" class="sc-brqgnP fVnLfE">Double</code>などの浮動小数点数、<br/>いくつかのコレクション、<strong>関数</strong>などの生成</li><li class="sc-eHgmQL gmKbQu">↑ の型の値を文字列にしてて表示する機能(pretty print)</li><li class="sc-eHgmQL gmKbQu">property-based testing の基本的なサポート</li><li class="sc-eHgmQL gmKbQu">Magnolia による生成と表示を担当する型クラスの自動導出</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">scala<span class="token" style="color:#EDEDED">&gt;</span> <span class="token" style="color:#96CBFE">import</span> codes<span class="token" style="color:#c5c8c6">.</span>quine<span class="token" style="color:#c5c8c6">.</span>leanprops<span class="token" style="color:#c5c8c6">.</span>_
<span class="token" style="color:#96CBFE">import</span> codes<span class="token" style="color:#c5c8c6">.</span>quine<span class="token" style="color:#c5c8c6">.</span>leanprops<span class="token" style="color:#c5c8c6">.</span>_

scala<span class="token" style="color:#EDEDED">&gt;</span> inspect <span class="token" style="color:#c5c8c6">{</span> <span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">Boolean</span><span class="token" style="color:#c5c8c6">,</span> y<span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">Boolean</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span> x <span class="token" style="color:#EDEDED">&amp;&amp;</span> y <span class="token" style="color:#c5c8c6">}</span>
res0<span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">String</span> <span class="token" style="color:#EDEDED">=</span>
<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#c5c8c6">,</span> y<span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#c5c8c6">,</span> y<span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">match</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">case</span> <span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#99CC99">true</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#99CC99">true</span>
  <span class="token" style="color:#96CBFE">case</span> _            <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#99CC99">false</span>
<span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span>

scala<span class="token" style="color:#EDEDED">&gt;</span> holds<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">100</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#c5c8c6">{</span> <span class="token" style="color:#c5c8c6">(</span>xs<span class="token" style="color:#EDEDED">:</span> List<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">Int</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span>
     <span class="token" style="color:#EDEDED">|</span>   xs<span class="token" style="color:#c5c8c6">.</span>sorted<span class="token" style="color:#c5c8c6">.</span>sorted <span class="token" style="color:#EDEDED">==</span> xs<span class="token" style="color:#c5c8c6">.</span>sorted
     <span class="token" style="color:#EDEDED">|</span> <span class="token" style="color:#c5c8c6">}</span>
res1<span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">Boolean</span> <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#99CC99">true</span>
</code></pre></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">動いています</h1></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">LeanProps の主要な型</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">trait Listable[A]</code>:<br/><code color="code" class="sc-brqgnP fVnLfE">A</code>が自動生成可能なことを表す型クラス</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">trait Inspectable[A]</code>:<br/><code color="code" class="sc-brqgnP fVnLfE">A</code>が文字列にして表示可能なことを表す型クラス</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">class Tiers[A]</code>:<br/><code color="code" class="sc-brqgnP fVnLfE">Stream[Seq[A]]</code>をラップしたデータ構造</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">class WithInspectConfig[A]</code>:<br/><code color="code" class="sc-brqgnP fVnLfE">InspectConfig</code>を持った Reader Monad</li></ul><p font-size="2" class="sc-kkGfuU kPOGYN">一番重要なのは<code color="code" class="sc-brqgnP fVnLfE">trait Listable[A]</code>。</p></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG"><code color="code" class="sc-brqgnP fVnLfE">trait Listable[A]</code></h2><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">trait</span> Listable<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">def</span> tiers<span class="token" style="color:#EDEDED">:</span> Tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Tiers[A]</code>は<code color="code" class="sc-brqgnP fVnLfE">Stream[Seq[A]]</code>のラッパ</li><li class="sc-eHgmQL gmKbQu">なぜ単純な<code color="code" class="sc-brqgnP fVnLfE">Stream[A]</code>ではなく<code color="code" class="sc-brqgnP fVnLfE">Stream[Seq[A]]</code>なのは<br/>
データを組み合わせられるようにするため</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">どうして<code color="code" class="sc-brqgnP fVnLfE">Stream[A]</code>じゃダメ？</h2><p font-size="2" class="sc-kkGfuU kPOGYN">仮に<code color="code" class="sc-brqgnP fVnLfE">Listable[A]</code>がこうだったとする。</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">trait</span> Listable<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">def</span> list<span class="token" style="color:#EDEDED">:</span> Stream<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre><p font-size="2" class="sc-kkGfuU kPOGYN"><code color="code" class="sc-brqgnP fVnLfE">list[A] = Listable[A].list</code>とする。</p></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">どうして<code color="code" class="sc-brqgnP fVnLfE">Stream[A]</code>じゃダメ？</h2><small><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN"><code color="code" class="sc-brqgnP fVnLfE">list[Int] = Stream(0, 1, -1, ...)</code></p></li><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN">そこで<code color="code" class="sc-brqgnP fVnLfE">list[(A, B)]</code>を考えると、単純な実装だと‥</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">list<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">(</span>A<span class="token" style="color:#c5c8c6">,</span> B<span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">]</span> <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#96CBFE">for</span> <span class="token" style="color:#c5c8c6">{</span>
  x <span class="token" style="color:#96CBFE">&lt;-</span> list<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span>
  y <span class="token" style="color:#96CBFE">&lt;-</span> list<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span>
<span class="token" style="color:#c5c8c6">}</span> <span class="token" style="color:#96CBFE">yield</span> <span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#c5c8c6">,</span> y<span class="token" style="color:#c5c8c6">)</span>
</code></pre></li></ul></small></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">どうして<code color="code" class="sc-brqgnP fVnLfE">Stream[A]</code>じゃダメ？</h2><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN">つまり、</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">Stream<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">(</span>list<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> list<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span>
       <span class="token" style="color:#c5c8c6">(</span>list<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> list<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span>
       <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span> <span class="token" style="color:#c5c8c6">(</span>list<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span>が終了するまで続く<span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span>
       <span class="token" style="color:#c5c8c6">(</span>list<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> list<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span>
       <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">)</span>
</code></pre></li><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN"><code color="code" class="sc-brqgnP fVnLfE">(Int, Int)</code>の場合、<br/>左側に<code color="code" class="sc-brqgnP fVnLfE">0</code>しか出てこなくなる。</p></li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG">どうして<code color="code" class="sc-brqgnP fVnLfE">Stream[A]</code>じゃダメ？</h2><small style="font-size:0.65em"><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN">そこで<code color="code" class="sc-brqgnP fVnLfE">tiers[A]: Stream[Seq[A]]</code>を考える。</p></li><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN"><code color="code" class="sc-brqgnP fVnLfE">tiers[Int] = Stream(Seq(0), Seq(1), Seq(-1), ...)</code></p></li><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN"><code color="code" class="sc-brqgnP fVnLfE">tiers[(A, B)]</code>は次のような感じ、</p><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">def</span> prod<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">,</span> B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span>xs<span class="token" style="color:#EDEDED">:</span> Seq<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span> ys<span class="token" style="color:#EDEDED">:</span> Seq<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#EDEDED">=</span> <span class="token" style="color:#96CBFE">for</span> <span class="token" style="color:#c5c8c6">(</span>x <span class="token" style="color:#96CBFE">&lt;-</span> xs<span class="token" style="color:#c5c8c6">;</span> y <span class="token" style="color:#96CBFE">&lt;-</span> ys<span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">yield</span> <span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#c5c8c6">,</span> y<span class="token" style="color:#c5c8c6">)</span>
Stream<span class="token" style="color:#c5c8c6">(</span>prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span>      <span class="token" style="color:#7C7C7C">// 添字の合計が0</span>
       prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
         <span class="token" style="color:#EDEDED">++</span> prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#7C7C7C">// 添字の合計が1</span>
       prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">2</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
         <span class="token" style="color:#EDEDED">++</span> prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span>
         <span class="token" style="color:#EDEDED">++</span> prod<span class="token" style="color:#c5c8c6">(</span>tiers<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">2</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> tiers<span class="token" style="color:#c5c8c6">[</span>B<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#7C7C7C">// 添字の合計が2</span>
       <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">)</span>
</code></pre></li><li class="sc-eHgmQL gmKbQu"><p font-size="2" class="sc-kkGfuU kPOGYN">こうすると、無限リストでもいい感じに積を取れる。</p></li></ul></small></div></div><div class="sc-htoDjs zIEGn"><div><h2 font-size="3" class="sc-kAzzGY sc-chPdSV cqoxnG"><code color="code" class="sc-brqgnP fVnLfE">trait Listable[A]</code></h2><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Set</code>や<code color="code" class="sc-brqgnP fVnLfE">Map</code>の場合は重複しないように生成したり、<br/>
いくつか工夫する必要がある。</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Function1</code>の場合は<code color="code" class="sc-brqgnP fVnLfE">Map</code>とほとんど同じなのだけど、<br/>
生成される関数を全域にするためフォールバック用の値も<br/>
同時に生成する。</li><li class="sc-eHgmQL gmKbQu">詳しくはソースコードを読んでください。</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">関数の表示</h1><p font-size="2" class="sc-kkGfuU kPOGYN">(さすがに時間が無さそうなので三行で)</p><ol font-size="2" class="sc-hSdWYo fJODMz"><li class="sc-eHgmQL gmKbQu">引数の組を生成して、関数を呼び出して、返り値を記録</li><li class="sc-eHgmQL gmKbQu">返り値の同じ引数の組を<code color="code" class="sc-brqgnP fVnLfE">_</code>で上手い具合に置き換えていく<br/>
(実際はそんなに上手くやっていない)</li><li class="sc-eHgmQL gmKbQu">それらを並べて表示する。</li></ol><p font-size="2" class="sc-kkGfuU kPOGYN">引数を自動生成できるんだから、<br/>
たくさん呼び出して返り値を記録すれば<br/>
それっぽい<code color="code" class="sc-brqgnP fVnLfE">match</code>式が作れるよね、というノリ。</p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP"><code color="code" class="sc-brqgnP fVnLfE">trait Inspectable[A]</code></h1><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#96CBFE">trait</span> Inspectable<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">def</span> inspect<span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#EDEDED">:</span> A<span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span> WithInspectConfig<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span>
  <span class="token" style="color:#96CBFE">def</span> bindtiers<span class="token" style="color:#c5c8c6">(</span>x<span class="token" style="color:#EDEDED">:</span> Try<span class="token" style="color:#c5c8c6">[</span>A<span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#EDEDED">:</span> Tiers<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#c5c8c6">(</span>Seq<span class="token" style="color:#c5c8c6">[</span>Seq<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">String</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">,</span> Try<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">String</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span><span class="token" style="color:#c5c8c6">]</span>
<span class="token" style="color:#c5c8c6">}</span>
</code></pre><p font-size="2" class="sc-kkGfuU kPOGYN">この<code color="code" class="sc-brqgnP fVnLfE">bindtiers</code>が、引数と返り値を記録するメソッド。</p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">現実は厳しい‥‥</h1><pre style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto;border-radius:0.3em;background:#1d1f21"><code style="color:#c5c8c6;text-shadow:0 1px rgba(0, 0, 0, 0.3);font-family:Inconsolata, Monaco, Consolas, &#x27;Courier New&#x27;, Courier, monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none">scala<span class="token" style="color:#EDEDED">&gt;</span> inspect <span class="token" style="color:#c5c8c6">{</span> <span class="token" style="color:#c5c8c6">(</span>xs<span class="token" style="color:#EDEDED">:</span> List<span class="token" style="color:#c5c8c6">[</span><span class="token" style="color:#A8FF60">Int</span><span class="token" style="color:#c5c8c6">]</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span> xs<span class="token" style="color:#c5c8c6">.</span>head <span class="token" style="color:#c5c8c6">}</span>
res3<span class="token" style="color:#EDEDED">:</span> <span class="token" style="color:#A8FF60">String</span> <span class="token" style="color:#EDEDED">=</span>
<span class="token" style="color:#c5c8c6">(</span>x <span class="token" style="color:#96CBFE">=&gt;</span> x <span class="token" style="color:#96CBFE">match</span> <span class="token" style="color:#c5c8c6">{</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#c5c8c6">)</span>        <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#96CBFE">throw</span> <span class="token" style="color:#96CBFE">new</span> NoSuchElementException<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#A8FF60">&quot;head of empty list&quot;</span><span class="token" style="color:#c5c8c6">)</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span>       <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">0</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span>    <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">0</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span>       <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">1</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span> <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">0</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span>    <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">0</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">,</span> <span class="token" style="color:#FF73FD">0</span><span class="token" style="color:#c5c8c6">)</span>    <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#FF73FD">1</span>
  <span class="token" style="color:#96CBFE">case</span> List<span class="token" style="color:#c5c8c6">(</span><span class="token" style="color:#EDEDED">-</span><span class="token" style="color:#FF73FD">1</span><span class="token" style="color:#c5c8c6">)</span>      <span class="token" style="color:#96CBFE">=&gt;</span> <span class="token" style="color:#EDEDED">-</span><span class="token" style="color:#FF73FD">1</span>
  <span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span><span class="token" style="color:#c5c8c6">.</span>
<span class="token" style="color:#c5c8c6">}</span><span class="token" style="color:#c5c8c6">)</span>
</code></pre><p font-size="2" class="sc-kkGfuU kPOGYN">ぶっちゃけ<code color="code" class="sc-brqgnP fVnLfE">Boolean</code>のときくらいしか上手くいかない。</p></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">思ったことなど</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Stream</code>は難しすぎる。<br/>すぐに OOM と StackOverflow を起こす</li><li class="sc-eHgmQL gmKbQu">Magnolia の黒魔術感‥‥。</li><li class="sc-eHgmQL gmKbQu">テストは <a href="https://github.com/lihaoyi/utest" color="link" class="sc-kEYyzF elpTsf">μTest</a> と <a href="https://github.com/tkawachi/sbt-doctest" color="link" class="sc-kEYyzF elpTsf">sbt-doctest</a> で書いた。<br/>
doctest 良い</li><li class="sc-eHgmQL gmKbQu">ドキュメントは <a href="https://scalameta.org/mdoc/" color="link" class="sc-kEYyzF elpTsf">mdoc</a> と <a href="https://docusaurus.io" color="link" class="sc-kEYyzF elpTsf">Docusaurus</a> で作った。<br/>
大したライブラリじゃないのに無駄に立派になってしまう</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">今後の目標、やっていき</h1><ul font-size="2" class="sc-iAyFgw iLvMQI"><li class="sc-eHgmQL gmKbQu">いくつかの名前のリファクタリング。<br/><code color="code" class="sc-brqgnP fVnLfE">WithInspectConfig</code>って名前どうなの？</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">Listable</code>、<code color="code" class="sc-brqgnP fVnLfE">Inspectable</code>のインスタンスを増やす</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">cats</code>・<code color="code" class="sc-brqgnP fVnLfE">scalaz</code>の型のインスタンスを実装する</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">shapeless</code>での自動導出</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">sbt</code>との統合</li><li class="sc-eHgmQL gmKbQu"><code color="code" class="sc-brqgnP fVnLfE">discipline</code>のようなインターフェース(?)</li></ul></div></div><div class="sc-htoDjs zIEGn"><div><h1 font-size="4" class="sc-jzJRlG sc-cSHVUG kcEqXP">ありがとうございました 😄</h1></div></div></div></div></div></div><div class="sc-htpNat cXgiMa"><div class="sc-bdVaJa eCoqJu"><button title="go to: 0" color="text" class="sc-bwzfXH kaUAEP"></button><button title="go to: 1" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 2" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 3" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 4" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 5" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 6" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 7" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 8" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 9" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 10" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 11" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 12" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 13" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 14" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 15" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 16" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 17" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 18" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 19" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 20" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 21" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 22" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 23" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 24" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 25" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 26" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 27" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 28" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 29" color="text" class="sc-bwzfXH gtARdA"></button><button title="go to: 30" color="text" class="sc-bwzfXH gtARdA"></button></div></div><div role="button" title="Previous Slide" class="sc-bxivhb sc-ifAKCX jyMVhc"></div><div role="button" title="Next Slide" class="sc-bxivhb sc-EHOje jHReHG"></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---cache-mdx-deck-template-a-25-e-21-bd-5-bc-9579945-ec-0-e-63-bbc-00653-js","jsonName":"deck-rpscala-236-306","path":"/deck/rpscala-236/"};window.dataPath="986/path---deck-rpscala-236-306-438-F0p9USg5VBU8MKGyezr11RGk";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-7786070715085e152cdb.js"],"component---cache-mdx-deck-template-d-2-d-1-f-177-e-1-f-9-fbd-41-b-013-e-5-a-00-e-9592-a-js":["/component---cache-mdx-deck-template-d-2-d-1-f-177-e-1-f-9-fbd-41-b-013-e-5-a-00-e-9592-a-js-440472876768d78440d1.js"],"component---cache-mdx-deck-template-8-e-66809-c-2177-b-1-abc-86650-cf-27-e-3-a-9-fa-js":["/component---cache-mdx-deck-template-8-e-66809-c-2177-b-1-abc-86650-cf-27-e-3-a-9-fa-js-9a9e7fe2f17310d877bc.js"],"component---cache-mdx-deck-template-a-25-e-21-bd-5-bc-9579945-ec-0-e-63-bbc-00653-js":["/component---cache-mdx-deck-template-a-25-e-21-bd-5-bc-9579945-ec-0-e-63-bbc-00653-js-ed865740aed939d2c943.js"],"component---src-pages-index-js":["/component---src-pages-index-js-ae97c6f2f9c8e520ced0.js"],"pages-manifest":["/pages-manifest-f365b72e0c1bfa27a0c3.js"]};/*]]>*/</script><script src="/decks/component---cache-mdx-deck-template-a-25-e-21-bd-5-bc-9579945-ec-0-e-63-bbc-00653-js-ed865740aed939d2c943.js" async=""></script><script src="/decks/1-757dd8e64a22d224a6d2.js" async=""></script><script src="/decks/0-843479870977f7b52199.js" async=""></script><script src="/decks/app-7786070715085e152cdb.js" async=""></script><script src="/decks/webpack-runtime-e38549b4153771d3610e.js" async=""></script></body></html>